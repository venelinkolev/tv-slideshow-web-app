// ErrorStateComponent - TV-Optimized Error Display Styles
// =======================================================

.error-state {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9999; // ⚡ INCREASED from 1000 to 9999
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;

  // Show animation
  &--visible {
    opacity: 1;
    visibility: visible;

    .error-state__container {
      transform: translateY(0);
      opacity: 1;
    }
  }

  // Category-specific styling
  &--network {
    .error-state__icon {
      color: var(--tv-warning-color, #FF9800);
    }
  }

  &--timeout {
    .error-state__icon {
      color: var(--tv-warning-color, #FF9800);
    }
  }

  &--server {
    .error-state__icon {
      color: var(--tv-error-color, #F44336);
    }
  }

  &--not_found {
    .error-state__icon {
      color: var(--tv-info-color, #2196F3);
    }
  }

  &--auth,
  &--forbidden {
    .error-state__icon {
      color: var(--tv-error-color, #F44336);
    }
  }

  &--validation {
    .error-state__icon {
      color: var(--tv-warning-color, #FF9800);
    }
  }

  &--general,
  &--unknown {
    .error-state__icon {
      color: var(--tv-error-color, #F44336);
    }
  }

  // Retrying state
  &--retrying {
    .error-state__container {
      pointer-events: none;
      
      .error-state__button--primary {
        opacity: 0.7;
      }
    }
  }
}

// Backdrop overlay - BEHIND content
.error-state__backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(4px);
  cursor: pointer;
  z-index: 1; // ⚡ EXPLICIT z-index to stay behind content
}

// Main error container
.error-state__overlay {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--tv-safe-margin, 32px);
  z-index: 2; // ⚡ ABOVE backdrop
}

.error-state__container {
  position: relative;
  background: var(--tv-background, #ffffff);
  border-radius: 16px;
  box-shadow: 0 24px 48px rgba(0, 0, 0, 0.3);
  padding: clamp(32px, 4vw, 64px);
  max-width: 90vw;
  width: 100%;
  max-width: 800px;
  transform: translateY(50px);
  opacity: 0;
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), 
              opacity 0.3s ease-in-out;
  z-index: 3; // ⚡ HIGHEST z-index for content

  // TV resolution adjustments
  @media (min-width: 1920px) {
    max-width: 1000px;
    padding: clamp(48px, 5vw, 80px);
  }

  @media (min-width: 3840px) {
    max-width: 1400px;
    padding: clamp(64px, 6vw, 120px);
  }
}

// Error header section
.error-state__header {
  display: flex;
  align-items: center;
  gap: clamp(16px, 2vw, 32px);
  margin-bottom: clamp(24px, 3vw, 40px);
  text-align: left;

  @media (max-width: 768px) {
    flex-direction: column;
    text-align: center;
    gap: 16px;
  }
}

.error-state__icon {
  font-size: clamp(3rem, 8vw, 6rem);
  line-height: 1;
  flex-shrink: 0;
  
  @media (min-width: 3840px) {
    font-size: clamp(4rem, 10vw, 8rem);
  }
}

.error-state__title {
  font-size: clamp(1.8rem, 4vw, 3rem);
  font-weight: 600;
  color: var(--tv-text-primary, #212121);
  margin: 0;
  line-height: 1.2;

  @media (min-width: 3840px) {
    font-size: clamp(2.4rem, 5vw, 4rem);
  }
}

// Error message section
.error-state__message {
  margin-bottom: clamp(32px, 4vw, 48px);
}

.error-state__description {
  font-size: clamp(1.1rem, 2.5vw, 1.8rem);
  color: var(--tv-text-secondary, #757575);
  line-height: 1.5;
  margin: 0;
  text-align: center;

  @media (min-width: 3840px) {
    font-size: clamp(1.4rem, 3vw, 2.2rem);
  }
}

// Action buttons section
.error-state__actions {
  display: flex;
  gap: clamp(16px, 2vw, 24px);
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: clamp(24px, 3vw, 32px);

  @media (max-width: 768px) {
    flex-direction: column;
    align-items: center;
  }
}

.error-state__button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: clamp(12px, 2vw, 20px) clamp(24px, 3vw, 40px);
  font-size: clamp(1rem, 2vw, 1.4rem);
  font-weight: 500;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  min-height: clamp(48px, 6vw, 72px);
  min-width: clamp(120px, 15vw, 200px);
  position: relative; // ⚡ ENSURE proper stacking
  z-index: 4; // ⚡ ABOVE everything for clickability

  &:focus {
    outline: 3px solid var(--tv-primary, #1565C0);
    outline-offset: 2px;
  }

  &:disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }

  // Primary button (Retry)
  &--primary {
    background: var(--tv-primary, #1565C0);
    color: white;

    &:hover:not(:disabled) {
      background: var(--tv-primary-dark, #0D47A1);
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(21, 101, 192, 0.3);
    }

    &:active:not(:disabled) {
      transform: translateY(0);
    }

    &--loading {
      pointer-events: none;
    }
  }

  // Secondary button (Dismiss)
  &--secondary {
    background: var(--tv-surface, #f5f5f5);
    color: var(--tv-text-primary, #212121);
    border: 2px solid var(--tv-border, #e0e0e0);

    &:hover {
      background: var(--tv-surface-hover, #eeeeee);
      border-color: var(--tv-border-hover, #bdbdbd);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(0);
    }
  }

  // Link button (Details toggle)
  &--link {
    background: transparent;
    color: var(--tv-primary, #1565C0);
    border: none;
    text-decoration: underline;
    min-width: auto;
    padding: clamp(8px, 1.5vw, 16px) clamp(16px, 2vw, 24px);

    &:hover {
      color: var(--tv-primary-dark, #0D47A1);
      background: rgba(21, 101, 192, 0.05);
    }
  }

  // Report button
  &--report {
    background: var(--tv-success, #4CAF50);
    color: white;

    &:hover {
      background: var(--tv-success-dark, #388E3C);
      transform: translateY(-2px);
    }
  }

  // TV size adjustments
  @media (min-width: 3840px) {
    font-size: clamp(1.2rem, 2.5vw, 1.8rem);
    min-height: clamp(64px, 8vw, 96px);
    padding: clamp(16px, 2.5vw, 28px) clamp(32px, 4vw, 56px);
  }
}

.error-state__button-text {
  flex: 1;
}

// Loading spinner
.error-state__loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top: 2px solid white;
  border-radius: 50%;
  animation: spin 1s linear infinite;

  @media (min-width: 3840px) {
    width: 28px;
    height: 28px;
    border-width: 3px;
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// Details toggle icon
.error-state__details-icon {
  transition: transform 0.3s ease-in-out;
  
  &.rotated {
    transform: rotate(180deg);
  }
}

// Details section
.error-state__details {
  border-top: 2px solid var(--tv-border, #e0e0e0);
  padding-top: clamp(24px, 3vw, 32px);
  margin-top: clamp(24px, 3vw, 32px);
  animation: slideDown 0.3s ease-in-out;
  position: relative; // ⚡ ENSURE proper stacking
  z-index: 3; // ⚡ ABOVE backdrop
}

@keyframes slideDown {
  0% {
    opacity: 0;
    transform: translateY(-20px);
    max-height: 0;
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    max-height: 1000px;
  }
}

.error-state__details-title {
  font-size: clamp(1.2rem, 2.5vw, 1.6rem);
  font-weight: 600;
  color: var(--tv-text-primary, #212121);
  margin: 0 0 clamp(16px, 2vw, 24px) 0;
}

// Technical info section
.error-state__technical-info {
  margin-bottom: clamp(24px, 3vw, 32px);
}

.error-state__code-block {
  background: var(--tv-code-background, #f8f9fa);
  border: 1px solid var(--tv-border, #e0e0e0);
  border-radius: 8px;
  padding: clamp(16px, 2vw, 24px);
  margin: clamp(12px, 1.5vw, 16px) 0;
  overflow-x: auto;
  position: relative; // ⚡ ENSURE proper stacking
  z-index: 3; // ⚡ ABOVE backdrop
}

.error-state__code {
  font-family: 'Courier New', monospace;
  font-size: clamp(0.8rem, 1.5vw, 1.1rem);
  color: var(--tv-text-primary, #212121);
  margin: 0;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.error-state__context,
.error-state__retry-info {
  margin-top: clamp(16px, 2vw, 20px);
}

.error-state__context-title,
.error-state__retry-title {
  font-size: clamp(1rem, 2vw, 1.3rem);
  font-weight: 500;
  color: var(--tv-text-primary, #212121);
  margin: 0 0 clamp(8px, 1vw, 12px) 0;
}

.error-state__context-data {
  background: var(--tv-surface, #f5f5f5);
  padding: clamp(12px, 1.5vw, 16px);
  border-radius: 6px;
  font-family: 'Courier New', monospace;
  font-size: clamp(0.8rem, 1.5vw, 1rem);
  overflow-x: auto;
}

.error-state__retry-details {
  list-style: disc;
  padding-left: clamp(20px, 2.5vw, 32px);
  margin: 0;
  
  li {
    font-size: clamp(0.9rem, 1.8vw, 1.2rem);
    color: var(--tv-text-secondary, #757575);
    margin-bottom: clamp(4px, 0.5vw, 8px);
  }
}

// Error reporting section
.error-state__reporting {
  border-top: 1px solid var(--tv-border-light, #f0f0f0);
  padding-top: clamp(20px, 2.5vw, 28px);
  position: relative; // ⚡ ENSURE proper stacking
  z-index: 3; // ⚡ ABOVE backdrop
}

.error-state__reporting-title {
  font-size: clamp(1.1rem, 2.2vw, 1.5rem);
  font-weight: 600;
  color: var(--tv-text-primary, #212121);
  margin: 0 0 clamp(12px, 1.5vw, 16px) 0;
}

.error-state__reporting-description {
  font-size: clamp(0.9rem, 1.8vw, 1.2rem);
  color: var(--tv-text-secondary, #757575);
  line-height: 1.4;
  margin: 0 0 clamp(16px, 2vw, 24px) 0;
}

.error-state__comment-section {
  margin-bottom: clamp(20px, 2.5vw, 28px);
}

.error-state__comment-label {
  display: block;
  font-size: clamp(1rem, 2vw, 1.3rem);
  font-weight: 500;
  color: var(--tv-text-primary, #212121);
  margin-bottom: clamp(8px, 1vw, 12px);
}

.error-state__comment-input {
  width: 100%;
  padding: clamp(12px, 1.5vw, 16px);
  font-size: clamp(1rem, 2vw, 1.3rem);
  border: 2px solid var(--tv-border, #e0e0e0);
  border-radius: 8px;
  background: var(--tv-background, #ffffff);
  color: var(--tv-text-primary, #212121);
  resize: vertical;
  min-height: clamp(80px, 10vw, 120px);
  font-family: inherit;
  position: relative; // ⚡ ENSURE proper stacking
  z-index: 4; // ⚡ HIGHEST for input interaction

  &:focus {
    outline: none;
    border-color: var(--tv-primary, #1565C0);
    box-shadow: 0 0 0 3px rgba(21, 101, 192, 0.1);
  }

  &::placeholder {
    color: var(--tv-text-hint, #9e9e9e);
  }
}

.error-state__comment-counter {
  font-size: clamp(0.8rem, 1.5vw, 1rem);
  color: var(--tv-text-hint, #9e9e9e);
  text-align: right;
  margin-top: clamp(4px, 0.5vw, 8px);
}

// Screen reader only content
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// High contrast mode support
@media (prefers-contrast: high) {
  .error-state__container {
    border: 3px solid var(--tv-text-primary, #212121);
  }

  .error-state__button {
    border: 2px solid currentColor;
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .error-state,
  .error-state__container,
  .error-state__button,
  .error-state__details-icon,
  .error-state__loading-spinner {
    transition: none;
    animation: none;
  }

  .error-state__details {
    animation: none;
  }
}

// ⚡ FORCE OVERRIDE for testing - remove if conflicts with app styles
// .error-state {
//   z-index: 9999 !important;
  
//   .error-state__container {
//     z-index: 10000 !important;
//     background: var(--tv-background, #ffffff) !important;
//   }
// }